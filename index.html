<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pipstagram</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#fff;
}
header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:12px;
  border-bottom:1px solid #ddd;
}
header h1{margin:0;font-size:22px}
.story-bar{
  display:flex;
  gap:10px;
  padding:10px;
  overflow-x:auto;
  border-bottom:1px solid #eee;
}
.story{
  width:60px;
  height:60px;
  border-radius:50%;
  border:2px solid #ff004f;
}
.post img{width:100%}
.actions span{
  font-size:22px;
  margin-right:10px;
  cursor:pointer;
}
.bottom-nav{
  position:fixed;
  bottom:0;
  left:0;
  right:0;
  height:55px;
  background:#fff;
  border-top:1px solid #ddd;
  display:flex;
  justify-content:space-around;
  align-items:center;
}
.bottom-nav span{font-size:24px;cursor:pointer}
#notifBadge{
  background:red;
  color:white;
  border-radius:50%;
  padding:2px 6px;
  font-size:12px;
  display:none;
}
</style>
</head>

<body>

<!-- HEADER -->
<header>
  <h1>ğŸ“¸ Pipstagram</h1>
  <div>
    <span onclick="location.href='notifications.html'">
      ğŸ”” <span id="notifBadge">0</span>
    </span>
    <span onclick="location.href='dm.html'">âœ‰ï¸</span>
  </div>
</header>

<!-- STORIES -->
<div class="story-bar">
  <img class="story" src="https://i.pravatar.cc/60?1">
  <img class="story" src="https://i.pravatar.cc/60?2">
  <img class="story" src="https://i.pravatar.cc/60?3">
</div>

<!-- FEED -->
<div id="feed"></div>

<!-- BOTTOM NAV -->
<div class="bottom-nav">
  <span onclick="location.href='index.html'">ğŸ </span>
  <span onclick="location.href='explore.html'">ğŸ”</span>
  <span onclick="location.href='reels.html'">ğŸ¬</span>
  <span onclick="location.href='profile.html'">ğŸ‘¤</span>
</div>

<!-- FIREBASE + APP -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, getDocs, onSnapshot, query, where } 
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCWmJVnZ4LIB07cPM8t_Run-1indRrDm9s",
  authDomain: "pipstagram-5b98e.firebaseapp.com",
  projectId: "pipstagram-5b98e",
  storageBucket: "pipstagram-5b98e.firebasestorage.app",
  messagingSenderId: "894857861700",
  appId: "1:894857861700:web:1d0c9028ed4125ecf43a11"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const feed = document.getElementById("feed");
const uid = localStorage.getItem("uid") || "demo";

// LOAD POSTS
const snap = await getDocs(collection(db,"posts"));
snap.forEach(doc=>{
  const p = doc.data();
  feed.innerHTML += `
    <div class="post">
      <img src="${p.image}">
      <div class="actions">
        <span>â¤ï¸ ${p.likes || 0}</span>
        <span>ğŸ’¬</span>
      </div>
    </div>
  `;
});

// NOTIFICATIONS
const badge = document.getElementById("notifBadge");
const q = query(
  collection(db,"notifications"),
  where("to","==",uid),
  where("seen","==",false)
);

onSnapshot(q,s=>{
  badge.textContent = s.size;
  badge.style.display = s.size ? "inline-block" : "none";
});
</script>

</body>
</html>


  

