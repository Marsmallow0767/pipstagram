<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Pipstagram</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;background:#000;color:#fff;font-family:Arial}
.hidden{display:none}
header{padding:10px;border-bottom:1px solid #222;display:flex;justify-content:space-between}
nav{position:fixed;bottom:0;width:100%;display:flex;justify-content:space-around;background:#000;border-top:1px solid #222}
nav button{background:none;border:none;color:white;font-size:22px}
section{padding:10px;padding-bottom:80px}
input,button{padding:10px;margin:5px;border-radius:6px;border:none}
button{background:#0095f6;color:white}

/* REELS */
#reels video{height:100vh;width:100%;object-fit:cover}

/* PROFILE GRID */
.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:2px}
.grid img{width:100%;aspect-ratio:1/1;object-fit:cover}

/* SEARCH */
.user{padding:10px;border-bottom:1px solid #222;cursor:pointer}
</style>
</head>
<body>

<!-- LOGIN -->
<div id="login">
<h2>üì∏ Pipstagram</h2>
<input id="email" placeholder="E-posta">
<input id="pass" type="password" placeholder="≈ûifre">
<button onclick="register()">Kaydol</button>
<button onclick="loginUser()">Giri≈ü</button>
</div>

<div id="app" class="hidden">

<header>
<b>Pipstagram</b>
<span onclick="show('search')">üîç</span>
</header>

<section id="home">Ana Sayfa</section>

<section id="reels" class="hidden"></section>

<section id="search" class="hidden">
<input id="searchInput" placeholder="Kullanƒ±cƒ± ara">
<button onclick="searchUser()">Ara</button>
<div id="searchResult"></div>
</section>

<section id="profile" class="hidden">
<h3>Profil</h3>
<p id="profileUid"></p>
<button onclick="follow()">Takip Et</button>
<div class="grid" id="postGrid"></div>
</section>

<nav>
<button onclick="show('home')">üè†</button>
<button onclick="show('reels')">üé¨</button>
<button onclick="show('profile')">üë§</button>
</nav>

</div>

<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>

<script>
firebase.initializeApp({
apiKey:"AIzaSyCWmJVnZ4LIB07cPM8t_Run-1indRrDm9s",
authDomain:"pipstagram-5b98e.firebaseapp.com",
projectId:"pipstagram-5b98e",
storageBucket:"pipstagram-5b98e.appspot.com"
});

const auth=firebase.auth();
const db=firebase.firestore();
const storage=firebase.storage();
let currentProfile=null;

function show(id){
document.querySelectorAll("section").forEach(s=>s.classList.add("hidden"));
document.getElementById(id).classList.remove("hidden");
}

function register(){
auth.createUserWithEmailAndPassword(email.value,pass.value)
.then(r=>db.collection("users").doc(r.user.uid).set({username:email.value.split("@")[0]}));
}

function loginUser(){
auth.signInWithEmailAndPassword(email.value,pass.value);
}

auth.onAuthStateChanged(u=>{
if(u){
login.classList.add("hidden");
app.classList.remove("hidden");
loadReels();
openProfile(u.uid);
}
});

/* üé¨ REELS */
function loadReels(){
db.collection("reels").onSnapshot(s=>{
reels.innerHTML="";
s.forEach(d=>{
reels.innerHTML+=`
<video src="${d.data().url}" controls muted autoplay loop></video>
`;
});
});
}

/* üîç SEARCH */
function searchUser(){
db.collection("users").where("username","==",searchInput.value).get()
.then(s=>{
searchResult.innerHTML="";
s.forEach(d=>{
searchResult.innerHTML+=`
<div class="user" onclick="openProfile('${d.id}')">${d.data().username}</div>
`;
});
});
}

/* üë§ PROFILE */
function openProfile(uid){
currentProfile=uid;
show("profile");
profileUid.innerText=uid;
loadPosts(uid);
}

function loadPosts(uid){
db.collection("posts").where("uid","==",uid).onSnapshot(s=>{
postGrid.innerHTML="";
s.forEach(p=>postGrid.innerHTML+=`<img src="${p.data().url}">`);
});
}

/* ‚ûï FOLLOW */
function follow(){
db.collection("follows").add({
from:auth.currentUser.uid,
to:currentProfile
});
alert("Takip edildi");
}
</script>
</body>
</html>









  













